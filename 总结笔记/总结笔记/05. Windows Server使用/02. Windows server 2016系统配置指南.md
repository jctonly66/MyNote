## 一、Windows Server 2016概述

### 1. Windows Server版本

Windows Server分为三个版本：

| Datacenter Edition | 适用范围                                   |
| ------------------ | ------------------------------------------ |
| Datacenter Edition | 适用于高度虚拟化和软件定义数据中心环境     |
| Standard Edition   | 适用于低密度或非虚拟化环境                 |
| Essentials Edition | 适用于最多25个用户，最多50台设备的小型企业 |

### 2. Windows网络架构

Windows的网络架构大致可以分为工作组架构（workgroup）、域架构（Domain）与包含前两者的混合架构。

工作组架构是一种分布式的管理模式，适用于小型网络；域架构是集中式的管理模式，适用于中大型网络。

两种管理架构对比：

1. 工作组网络也被称为对等式的网络，因为网络上的每台计算机的地位都是平等的，资源与管理分散在各个计算机上。每个计算机都拥有自己的本地安全账户数据库SAM（Security Accounts Manager），该SAM只能管理本机资源的权限。
2. 域内所有计算机共享一个集中式的目录数据库（directory database），该目录数据库包含着整个域内所有用户的账户等相关数据。该目录数据库通过域控制器中的AD DS（active directory domain services）提供与管理。

#### 2.1 域中计算机的种类

##### 2.1.1 域控制器

域控制器需要是服务器级别的计算机，一个域内可以有多个域控制器，大多数情况下，多个域控制器彼此地位相同，各自存储着一份几乎完全相同的AD DS数据库。

当在其中一台域控制器新增了一个用户后，此账户是被建立在这台域控制器的AD DS数据库中的，之后这份数据会自动被复制到其他域控制器的AD DS数据库中内。确保所有域控制器中的AD DS数据同步；

用户在域内通过域控制器来审核账户与密码的正确性；

多台域控制器可以提供容错功能，并且可以分担用户认证的工作。

##### 2.1.2 成员服务器

加入域的服务器称为成员服务器。未加入域的服务器称为独立服务器或工作组服务器

Windows 10 Home版无法加入域。

### 3. IP地址设置

如果计算机的IP地址是采用自动获取的方式，但是却因故无法获取IP地址，那么此时该计算机会通过Automatic Private IP Addressing（APIPA）机制来为自己设置一个网络标识符为169.254.0.0的临时IP地址，不过只能够用它来与同一网络内IP地址也是169.254.x.x格式的计算机通信。

## 二、安装与基本环境设置

### 1. Windows Server 2016的文件系统

任何一个新的磁盘分区都必须被格式化成适当的文件系统后才可以在其中存储数据，除了exFAT、FAT32、FAT与Windows主流文件系统NTFS之外，Windows Server 2016也支持ReFS，它提供较高的安全性、更大的磁盘容量与比较好的性能等。不过只能将Windows Server 2016安装到NTFS文件系统的磁盘分区内，而ReFS、exFAT、FAT32与FAT磁盘仅能用来存储数据。

### 2. 注销、登录与关机

锁定：锁定期间所有的应用程序仍然会继续运行。

注销：注销会结束目前正在执行的应用程序

### 3. 查看IP地址冲突的设备

如果网络属性中有多个自动配置地址，则可能发生了IP地址冲突。可以通过事件查看器找出是哪一台计算机的IP与当前计算机冲突。

事件查看器 -> 展开Windows日志 

回环测试可以检测本地计算机的网卡硬件与TCP/IP驱动程序是否可以正常接收、发送TCP/IP数据包。

### 4. 启用或关闭IE增强的安全配置

Windows Server 2016应该扮演着重要服务器的角色，我们不应该利用它来上网，因为这样会增加被攻击的风险，因此WIndows Server 2016默认会通过启用IE增强的安全配置（IE ESC）来将IE的安全级别设置为高安全性，而它会阻挡连接大部分网站。

### 5. Windows防火墙或网络位置

为了增加计算机在网络中的安全性，位于不同网络位置的计算机有着不同的Windows防火墙设置，例如位于公用网络的计算机，其防火墙的设置较为严格，而位于专用网络的计算机则较为宽松。

### 6. 驱动程序签名

驱动程序经过签名后，该程序内便会包含一个数字签名，系统可通过此签名来得知驱动程序的发行厂商名称与该程序的原始内容是否被篡改，如此便可确保所安装的驱动程序是安全的。

当在安装驱动程序时，若该驱动程序未经过签名、数字签名无法被验证是否有效或驱动程序内容是否被篡改过，系统便会显示警告信息。

### 7. 默认启动系统的设置

如果有多个操作系统，可以设置默认的操作系统。

【属性】->【高级】->【启动和故障恢复】

### 8. 计算机关闭方式

**关机（shutdown）**：会关闭所有的应用程序，然后停止系统运行与关闭电源。

**休眠（hibernate）**：它会将当前在内存中（RAM）所有已打开的文件与应用程序都存储到硬盘的休眠文件内，然后停止系统运行与关闭电源。当再度使用计算机时，只要开启计算机电源，系统就会利用休眠文件来恢复休眠前所打开的文件与应用程序，也就是直接将系统恢复到休眠之前的状态。

休眠文件的文件名为hiberfil.sys，由于需要将内存中的数据写到此文件，因此硬盘可用空间需要大于物理内存容量，此文件会被建立在Windows系统安装磁盘的根文件夹内，且是受保护的、隐藏的操作系统文件。

**睡眠（sleep）**：它会适用**非常微小的电量**来维持内存中所有打开的文件与应用程序，然后关闭计算机。要再度使用计算机时，只要按下电源开关，系统就会在数秒内快速恢复所有打开的文件与应用程序，也就是恢复到睡眠之前的状态。

**混合式睡眠（hybrid sleep）**：它同时具备睡眠与休眠功能，也就是说它不但会使用非常微小的电量来维持内存中所有打开的文件与应用程序，同时也会将它们存储到硬盘的休眠文件内，然后关闭计算机。当再度使用计算机时，只要按下电源开关，系统还是会在数秒内通过睡眠机制，快速恢复到睡眠前的状态，即使在混合式睡眠后因故电源被切断而遗失内存中的数据也不必担心，因为此时它还可以利用休眠文件中的数据来恢复到之前的状态。

### 9. 虚拟内存

当计算机的物理内存（RAM）不够用时，Windows系统会通过将部分硬盘空间虚拟成内存的方式来提供更多的内存给应用程序或服务。系统是通过建立一个名称为pagefile.sys的文件来当作虚拟内存的存储空间，此文件又被称为页面文件。

## 三、本地用户与组账户的管理

### 1. 内置的本地账户

每一台Windows计算机都有一个本地安全账户数据库（SAM），用户在使用计算机前都必须登录该计算机，也就是要提供有效的用户账户和密码，而这个用户账户就是建立在本机安全账户数据库内，这个账户被称为本地用户账户，而建立在此数据库内的组被称为本地组账户。

#### 1.1 内置的本地用户账户

##### 1.1.1 Administrator（系统管理员）

Administrator拥有最高的权限，为了安全起见，建议对这个改名。

##### 1.1.2 Guest（来宾）

Guest供没有账户的用户来临时使用，它只有很少的权限。可以更改名称，但无法将其删除。此账户默认是被停用的。

#### 1.2 内置的本地组账户

系统内置了许多本地组，它们本身都已经赋予了一定的权限（rights），以便让他们具备管理本地计算机或访问本机资源的能力。只要用户账户被加入到本地组中，此用户就会具备该组所拥有的权限。

1. Administrators：此组内的用户具备系统管理员的权限，具有最大的控制权。Administrator隶属于此组。
2. Backup Operators：此组内的用户可以通过Windows Server Backup工具来备份与还原计算机内的文件，不论他们是或否有权限访问这些文件。
3. Guests：此组内的用户无法永远改变桌面的工作环境，当他们登录时，系统会为他们建立一个临时的用户配置文件，而注销时此配置文件就会被删除。此组默认成员为用户账户Guest。
4. Network Configuration Operators：此组内的用户可以执行常规的网络配置工作，不能执行与网络服务器配置有关的工作。
5. Perforomance Monitor User：此组内的用户可监视本地计算机的运行性能。
6. Power Users：貌似已经被淘汰了，与普通用户没有太多区别。
7. Remote Desktop Uses：此组内的用户可以从远程计算机利用远程桌面服务登录。
8. Users：此组内的用户只拥有一些基本权限，但是不能将文件夹共享给网络上的其他的用户，不能将计算机关机等。所有新建的本地用户账户都会自动隶属于此组。

#### 1.3 特殊组账户

Windows Server 2016内有一些特殊组，而且无法更改这些组的成员。常见的有：

1. Everyone：所有用户都属于这个组。
2. Authenticated Users：凡是利用有效用户账户来登录此计算机的用户，都隶属于此组。
3. Interactive：凡事在本地登录的用户，都隶属于此组。
4. Network：凡是通过网络来登录此计算机的用户，都隶属于此组。
5. Anonymous Logon：凡是未利用有效的普通用户账户登录的用户（匿名用户），都隶属于此组。Anonymous Logon默认并不隶属于Everyone组。
6. Dialup：凡是利用拨号方式连接的用户，都隶属于此组。

### 2. 本地用户账户的管理

#### 2.1 新建本地用户账户

用户下次登录时须更改密码：用户在下次登录时，系统会强制用户更改密码，这个操作可以确保只有该用户知道自己所设置的密码。

但是若该用户是通过网络来登录的话，请勿勾选此选项，否则用户将无法登录，因为用户通过网络登录时无法更改密码。



## 四、虚拟环境的搭建

## 五、建立Active Directory的域

## 六、NTFS与ReFS磁盘的安全性与管理

## 七、访问网络文件

## 八、打印服务器的配置与管理

## 九、利用配置文件来管理用户工作环境

## 十、组策略与安全设置

## 十一、远程桌面连接

## 十二、磁盘系统的管理

## 十三、利用WSUS部署更新程序

## 十四、AD RMS企业文件权限管理

## 十五、分布式文件系统

## 十六、搭建iSCSI文件服务器故障转移群集

## 十七、系统启动的疑难排除